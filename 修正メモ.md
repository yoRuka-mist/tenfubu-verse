# 最新の修正 (Yの修正とSTEALTH強化)

## 1. Yの能力修正 ✅
- **指摘**: YはRUSH(突進)ではなく、STEALTH(隠密)のみを持つ
- **修正**: 
  - カード定義(`c_yuki`)の説明文と`passiveAbilities`を修正
  - `passiveAbilities`: `['RUSH']` → `['STEALTH']`
  - `description`: `[突進]` → `[隠密]`
- **ファイル**: `engine.ts`

## 2. STEALTH(隠密)の守護無視効果の実装 ✅
- **指摘**: 隠密持ちは相手の守護を無視して攻撃できるはずだが、できていなかった
- **修正**:
  - **サーバーサイド (`engine.ts`)**: `ATTACK` 処理で、攻撃者が `STEALTH` を持っている場合、`wardUnits` のチェックをスキップするロジックを追加
  - **クライアントサイド (`GameScreen.tsx`)**: ドラッグ時のターゲット判定で、攻撃者が `STEALTH` を持っている場合、`isBlocked` (守護ブロック) 判定をスキップするロジックを追加
- **結果**: 隠密状態のユニット(Yなど)は、相手の守護フォロワーを無視してリーダーや他のフォロワーを攻撃可能になった

## 3. 通信対戦機能の強化 (Phase 3) ✅
- **切断ハンドリング**: 相手の接続切れを検知し、ゲームを安全に終了させる処理を実装済み

## 確認が必要な事項
- Yが進化した時もSTEALTHが維持されるか（定義上は進化後もSTEALTHが必要だが、現状進化後画像はあるが定義はどうなっているか確認しても良いかも。現在は進化時にpassiveAbilitiesは引き継がれるロジックになっているので基本OK）
