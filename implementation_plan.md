# 実装計画 - UI座標調整と表示バグ修正

## 概要
現在、ゲーム画面においてリーダーとフォロワーの配置に違和感があり、また自分のフォロワーを複数出した際に表示が重なる・ずれるといった問題が発生しています。これらのUI座標を修正し、表示ロジックを改善します。

## 修正内容

### 1. リーダーとフォロワーの配置調整
- **目的**: 画面中央（ターン終了ボタンの中心）を基準にフォロワーを配置し、視覚的なバランスを整える。
- **変更箇所**: `game/src/screens/GameScreen.tsx`
- **詳細**:
    - 自分のリーダー (`playerLeaderRef`) の `bottom` 座標を `-60px` から `-50px` に修正します。
    - 相手のフォロワーコンテナの `top` を `35%` から `calc(50% - 125px)` に変更します。（高さ120pxなので、下端が50% - 5pxになります）
    - 自分のフォロワーコンテナの `top` を `63%` から `calc(50% + 5px)` に変更します。（上端が50% + 5pxになります）
    - これにより、フォロワー間の隙間（10px）の中央がちょうど 50%（ターン終了ボタンの中心）に位置するようになります。

### 2. 自分のフォロワーの表示バグ修正
- **目的**: フォロワーが重なる問題と右にずれる問題を修正し、スムーズなアニメーションを実現する。
- **原因分析**: 
    - `transform` プロパティの結合時に、条件分岐で `'none'` という文字列が連結されており、これがCSSとして不正なため `translateX(-50%)` などの設定が無効化（フォールバック）されています。その結果、中心点がずれ、複数体が重なって表示されています。
- **変更箇所**: `game/src/screens/GameScreen.tsx`
- **詳細**:
    - 自分のフォロワーの `transform` において、`'none'` の代わりに空文字列 `''` または `scale(1)` を使用するように修正します。
    - 相手のフォロワーと同様の表示ロジック（`visualPlayerBoard` の `map` 内での `offsetX` 計算）が正しく適用されるようにします。

## 実施ステップ
1. `GameScreen.tsx` の修正
    - 相手フォロワーコンテナの `top` 修正
    - 自分フォロワーコンテナの `top` 修正
    - 自分リーダーの `bottom` 修正
    - 自分フォロワーの `transform` 生成ロジックの修正
2. 動作確認
    - 実際の画面で配置と重なりが解消されているか確認する。

## デグレ防止策
- 相手側のフォロワー配置ロジックは正常であるため、それと整合性が取れるように修正します。
- リーダーのHP/EPなどのUIがリーダー本体に追従することを確認します。
- ターゲティング時の線（Arrow）やエフェクトの発生位置がずれないかチェックします。
